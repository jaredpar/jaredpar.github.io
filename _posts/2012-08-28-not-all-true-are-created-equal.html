<p>&#160;</p>  <p>During a review of some low level bit manipulation logic a developer raised a question about the correctness of a piece of code which allowed any arbitrary byte to be seen as a bool.&#160; No one could recall if true was defined as not 0 or simply 1.&#160; If it was the latter then the code was allowing for a large range of invalid bool values to be created.&#160; A quick look at the CLI spec revealed the immediate answer (partition III section 1.1.2)</p>  <blockquote>   <p>A CLI Boolean type occupies 1 byte in memory. A bit pattern of all zeroes denotes a value of false. A bit pattern with any one or more bits set (analogous to a non-zero integer) denotes a value of true.</p> </blockquote>  <p>A quick test backed up this particular assertion.&#160; Any non-zero value is true and 0 is indeed false.&#160; We took the test one step further and discovered, to the surprise of about half of us, that just because two bool values are true, doesn’t mean they’re equal.&#160;&#160; </p>  <pre class="code"><span style="background: white; color: black;">    </span><span style="background: white; color: blue;">class </span><span style="background: white; color: rgb(43, 145, 175);">Program
    </span><span style="background: white; color: black;">{
        [</span><span style="background: white; color: rgb(43, 145, 175);">StructLayout</span><span style="background: white; color: black;">(</span><span style="background: white; color: rgb(43, 145, 175);">LayoutKind</span><span style="background: white; color: black;">.Explicit)]
        </span><span style="background: white; color: blue;">struct </span><span style="background: white; color: rgb(43, 145, 175);">Union
        </span><span style="background: white; color: black;">{
            [</span><span style="background: white; color: rgb(43, 145, 175);">FieldOffset</span><span style="background: white; color: black;">(0)]
            </span><span style="background: white; color: blue;">internal byte </span><span style="background: white; color: black;">ByteField;

            [</span><span style="background: white; color: rgb(43, 145, 175);">FieldOffset</span><span style="background: white; color: black;">(0)]
            </span><span style="background: white; color: blue;">internal bool </span><span style="background: white; color: black;">BoolField;
        }

        </span><span style="background: white; color: blue;">static void </span><span style="background: white; color: black;">Main(</span><span style="background: white; color: blue;">string</span><span style="background: white; color: black;">[] args)
        {
            </span><span style="background: white; color: rgb(43, 145, 175);">Union </span><span style="background: white; color: black;">u1 = </span><span style="background: white; color: blue;">new </span><span style="background: white; color: rgb(43, 145, 175);">Union</span><span style="background: white; color: black;">();
            </span><span style="background: white; color: rgb(43, 145, 175);">Union </span><span style="background: white; color: black;">u2 = </span><span style="background: white; color: blue;">new </span><span style="background: white; color: rgb(43, 145, 175);">Union</span><span style="background: white; color: black;">();
            u1.ByteField = 1;
            u2.ByteField = 2;
            </span><span style="background: white; color: rgb(43, 145, 175);">Console</span><span style="background: white; color: black;">.WriteLine(u1.BoolField); </span><span style="background: white; color: green;">// True
            </span><span style="background: white; color: rgb(43, 145, 175);">Console</span><span style="background: white; color: black;">.WriteLine(u2.BoolField); </span><span style="background: white; color: green;">// True
            </span><span style="background: white; color: rgb(43, 145, 175);">Console</span><span style="background: white; color: black;">.WriteLine(u1.BoolField == u2.BoolField); </span><span style="background: white; color: green;">// False
        </span><span style="background: white; color: black;">}
    }
</span></pre>

<p>I was one of those who was surprised <img class="wlEmoticon wlEmoticon-smile" alt="Smile" src="http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-39-97-metablogapi/7142.wlEmoticon_2D00_smile_5F00_368A2CC6.png" /></p><div style="clear:both;"></div></div>
    