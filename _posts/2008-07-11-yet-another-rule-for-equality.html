<p>"If you implement equality in a child class, including operators, you must implement the equality operators in the base class."</p> <p>Unfortunately this is another case of learn the hard way but makes sense when you think about it.&nbsp; The below code snippet is an example of the problem that I hit.&nbsp; Even though I have equality properly defined in Child, the equality check goes through Parent.&nbsp; As such the C# compiler will perform the default comparison which is reference equality.&nbsp; </p> <p>The simple fix is to add the operator ==/!= definitions to Parent which call through EqualityComparer&lt;Parent&gt;.Default.&nbsp; This will end up calling obj.Equals and equality will function correctly.</p> <p>While this is intuitive when you think about it, it's an easy trap to fall into.&nbsp; It would be nice if there was a Compiler/FXCop warning here.&nbsp; </p><pre class="code">    <span style="color: rgb(0,0,255)">class</span> <span style="color: rgb(43,145,175)">Parent</span> {
    }
    <span style="color: rgb(0,0,255)">class</span> <span style="color: rgb(43,145,175)">Child</span> : <span style="color: rgb(43,145,175)">Parent</span>{
        <span style="color: rgb(0,0,255)">public</span> <span style="color: rgb(0,0,255)">readonly</span> <span style="color: rgb(0,0,255)">int</span> Field1;
        <span style="color: rgb(0,0,255)">public</span> Child(<span style="color: rgb(0,0,255)">int</span> value) {
            Field1 = value;
        }

        <span style="color: rgb(0,0,255)">public</span> <span style="color: rgb(0,0,255)">override</span> <span style="color: rgb(0,0,255)">int</span> GetHashCode() {
            <span style="color: rgb(0,0,255)">return</span> Field1;
        }
        <span style="color: rgb(0,0,255)">public</span> <span style="color: rgb(0,0,255)">override</span> <span style="color: rgb(0,0,255)">bool</span> Equals(<span style="color: rgb(0,0,255)">object</span> obj) {
            <span style="color: rgb(0,0,255)">var</span> other = obj <span style="color: rgb(0,0,255)">as</span> <span style="color: rgb(43,145,175)">Child</span>;
            <span style="color: rgb(0,0,255)">if</span> (other == <span style="color: rgb(0,0,255)">null</span>) {
                <span style="color: rgb(0,0,255)">return</span> <span style="color: rgb(0,0,255)">false</span>;
            }
            <span style="color: rgb(0,0,255)">return</span> other.Field1 == Field1;
        }
        <span style="color: rgb(0,0,255)">public</span> <span style="color: rgb(0,0,255)">static</span> <span style="color: rgb(0,0,255)">bool</span> <span style="color: rgb(0,0,255)">operator</span> ==(<span style="color: rgb(43,145,175)">Child</span> left, <span style="color: rgb(43,145,175)">Child</span> right) {
            <span style="color: rgb(0,0,255)">return</span> <span style="color: rgb(43,145,175)">EqualityComparer</span>&lt;<span style="color: rgb(43,145,175)">Child</span>&gt;.Default.Equals(left, right);
        }

        <span style="color: rgb(0,0,255)">public</span> <span style="color: rgb(0,0,255)">static</span> <span style="color: rgb(0,0,255)">bool</span> <span style="color: rgb(0,0,255)">operator</span> !=(<span style="color: rgb(43,145,175)">Child</span> left, <span style="color: rgb(43,145,175)">Child</span> right) {
            <span style="color: rgb(0,0,255)">return</span> !<span style="color: rgb(43,145,175)">EqualityComparer</span>&lt;<span style="color: rgb(43,145,175)">Child</span>&gt;.Default.Equals(left, right);
        }
    }

    <span style="color: rgb(0,0,255)">class</span> <span style="color: rgb(43,145,175)">Program</span> {
        <span style="color: rgb(0,0,255)">static</span> <span style="color: rgb(0,0,255)">void</span> Main(<span style="color: rgb(0,0,255)">string</span>[] args) {
            <span style="color: rgb(43,145,175)">Child</span> child1 = <span style="color: rgb(0,0,255)">new</span> <span style="color: rgb(43,145,175)">Child</span>(42);
            <span style="color: rgb(43,145,175)">Child</span> child2 = <span style="color: rgb(0,0,255)">new</span> <span style="color: rgb(43,145,175)">Child</span>(42);
            <span style="color: rgb(43,145,175)">Parent</span> parent1 = child1;
            <span style="color: rgb(43,145,175)">Parent</span> parent2 = child2;
            <span style="color: rgb(0,0,255)">bool</span> isChildEqual = child2 == child1;       <span style="color: rgb(0,128,0)">// True
</span>            <span style="color: rgb(0,0,255)">bool</span> isParentEqual = parent1 == parent2;    <span style="color: rgb(0,128,0)">// False
</span>        }
    }</pre><a href="http://11011.net/software/vspaste"></a></div>
    