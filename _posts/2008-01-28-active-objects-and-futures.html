<p>Herb Sutter gave one of my favorite and inspiring presentations.&#160; It is called &quot;The Free Lunch is Over&quot;.&#160; The original article can be found <a href="http://www.gotw.ca/publications/concurrency-ddj.htm">here</a>.&#160; My first encounter though came from his <a href="http://www.pluralsight.com/blogs/hsutter/archive/2005/10/25/15903.aspx">PDC presentation</a> and highly recommend viewing that as well.</p>  <p>The part that interested me the most about the talk was two new threading abstractions I hadn't encountered before.&#160; Future's and ActiveObjects.&#160; One of the basic premise is that concurrency should be grep`able and somewhat declarative.&#160; The act of calling a method on a background thread and later waiting for it to complete should be simple, not complicated.&#160; </p>  <p>Asynchronous programming is one of my favorite aspects of computing.&#160; What interests me the most is how asynchronous programming can be useful for UI.&#160; My biggest pet peeve is when UI hangs because an operation call, or network operation takes too long.&#160; Why not make multi-threading easy and give users a way to cancel out of these operations???&#160; Or start loading on the background thread instead of waiting for the user to perform a specific.&#160; Hopefully over the next month or so I'll lay out some utilities and classes building on Futures and Active Objects that will do precisely this.</p>  <p>Future's are actions where work can be done now, but the result is not needed until a future time.&#160; Work occurs on a separate thread and the results can be easily joined once work is complete.</p>  <pre class="code">            <span style="color: rgb(0,0,255)">var</span> f = <span style="color: rgb(43,145,175)">Future</span>.Create(() =&gt; LongCalculation());
            <span style="color: rgb(0,128,0)">// ...
</span>            <span style="color: rgb(0,0,255)">var</span> result = f.Wait();</pre>

<p>Future's are now exposed via the <a href="http://blogs.msdn.com/pfxteam/archive/2007/11/29/6558413.aspx">Parallel Extension</a> team's work.&#160; You can download the CTP off of their web site and get to work. </p>

<p>ActiveObjects are objects which only expose Asynchronous functions where the return value is exposed as a Future.&#160; So instead of </p>

<pre class="code">        <span style="color: rgb(0,0,255)">string</span> GetName()</pre>

<p><a href="http://11011.net/software/vspaste"></a>You would have</p>

<pre class="code">        <span style="color: rgb(43,145,175)">Future</span>&lt;<span style="color: rgb(0,0,255)">string</span>&gt; GetName()</pre>
<a href="http://11011.net/software/vspaste"></a>

<p>An ActiveObject essentially lives on or owns a thread.&#160; All operations are queued up and processed one at a time.&#160; Since only one action at a time can be executing the object internals don't have to use locks or consider many types of race conditions.&#160; In fact if your return types are immutable a great many threading concerns go out the window.&#160; Yet all of the calls are inherently asynchronous so callers can get the result only when they are needed.&#160; The best of both worlds.&#160; </p>

<p>Both of these provide significant advantages over the &quot;lock before use&quot; patterns.&#160; In my experience I find these to be hard to maintain and lead to difficult to track down bugs.&#160; I can't tell you how many times I've gone through someone else's code, or even my own, and wondered ...</p>

<ul>
  <li>Did they forget to lock here or is this an optimization?</li>

  <li>Is a join needed here or can these terminate at separate times?</li>

  <li>OK I need to touch that variable, can it be accessed in multiple threads or is it safe? </li>
</ul>

<p>Futures/Active Objects on the other hand are a bit more declarative and straight forward to understand than plain old locks.&#160; They allow you to do away with many uses of plain old locking.&#160; Don't confuse this with me saying they are a cure all for threading.&#160; They're not.&#160; But in my experiences I've found them to be a significant upgrade.&#160; </p>

<p>Over the next month or so I'll be laying out the design for a basic ActiveObject implementation.&#160; We will likely have to deviate off of the Parrallel Extension work to get certain behaviors but the concepts map well.</p></div>
    